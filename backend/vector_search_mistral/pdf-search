#!/bin/bash

# Get the directory where this script is located
SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

# Set the project root directory
PROJECT_ROOT="$( cd "$SCRIPT_DIR/../.." && pwd )"

# Path to the virtual environment Python interpreter
VENV_PYTHON="$PROJECT_ROOT/backend/.venv/bin/python"

# Check if the virtual environment exists
if [ ! -f "$VENV_PYTHON" ]; then
    echo "Error: Python virtual environment not found at $VENV_PYTHON"
    echo "Please make sure the virtual environment is created in the backend/.venv directory"
    exit 1
fi

# Add helpful message if no arguments provided
if [ $# -eq 0 ]; then
    echo "PDF Search Engine - Command Line Tool"
    echo ""
    echo "Usage:"
    echo "  pdf-search process [options]    Process and index PDF files"
    echo "  pdf-search search <query>       Search indexed PDFs"
    echo ""
    echo "For more information, run:"
    echo "  pdf-search process --help"
    echo "  pdf-search search --help"
    exit 1
fi

# Run the Python script with all arguments passed through
"$VENV_PYTHON" "$SCRIPT_DIR/run.py" "$@" 